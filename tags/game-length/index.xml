<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Game length on Analysis Paralysis</title>
    <link>https://recommend-games.github.io/tags/game-length/</link>
    <description>Recent content in Game length on Analysis Paralysis</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <managingEditor>contact@recommend.games (Recommend.Games)</managingEditor>
    <webMaster>contact@recommend.games (Recommend.Games)</webMaster>
    <lastBuildDate>Tue, 27 Feb 2024 22:37:01 +0200</lastBuildDate>
    <atom:link href="https://recommend-games.github.io/tags/game-length/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>How long is a game of High Society?</title>
      <link>https://recommend-games.github.io/posts/high-society/</link>
      <pubDate>Tue, 27 Feb 2024 22:37:01 +0200</pubDate><author>contact@recommend.games (Recommend.Games)</author>
      <guid>https://recommend-games.github.io/posts/high-society/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://recommend.games/#/game/220&#34; style=&#34;font-variant: small-caps;&#34;&gt;High Society&lt;/a&gt; is a classic bidding game by classic designer &lt;a href=&#34;https://recommend.games/#/?designer=2&#34;&gt;Dr Reiner Knizia&lt;/a&gt;, most recently released by &lt;a href=&#34;https://www.ospreypublishing.com/uk/osprey-games/&#34;&gt;Osprey Games&lt;/a&gt; with a wonderfully classic look:&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/high-society/high_society_cover_hu9e59c812d2d89cfb564078a094de22cd_579104_600x0_resize_q75_box.jpg&#34;&#xA;&#x9;alt=&#34;Cover of High Society&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;The general concept is quite simple: the players are members of said &amp;ldquo;high society&amp;rdquo; and are trying to outdo each other in showing off their wealth. The game is played over a series of rounds, and in each round, a card is revealed from a deck of 16 cards. The players then take turns bidding on the card, and the player who wins the bid gets the card. The cards are worth points, and the player with the most points at the end of the game wins.&lt;/p&gt;&#xA;&lt;p&gt;Here&amp;rsquo;s the twist though: The player with the least money at the end of the game is disqualified (that poor bastard can no longer be accepted as a member of this exclusive club!), so the players are trying to get the most points while also keeping enough money to stay in the game. This provides agonising decisions every turn ‚Äì as well as a biting satire of the upper class.&lt;/p&gt;&#xA;&lt;p&gt;One interesting detail is the way the game ends. There&amp;rsquo;s a total of 16 cards to be autioned off in the deck; 4 of these cards have a dark background. As soon as the 4th dark card is revealed, the game ends immediately. (That last card isn&amp;rsquo;t sold anymore.) This looming end adds extra tension to the game as players need to take gambles towards the end of the game and try to guess how many more chances they&amp;rsquo;ll get to bid.&lt;/p&gt;&#xA;&lt;p&gt;This is where the maths comes in. While the strategy is way too deep to be easily analysed (and involves some interesting meta in pricing the cards), modelling the game length is pretty straightforward and we&amp;rsquo;ll do so in a couple of different ways. We&amp;rsquo;ll start with a simple simulation to understand what&amp;rsquo;s going on. Then we&amp;rsquo;ll develop exact formulae, which will culminate in meeting your new best friend: the negative hypergeometric distribution.&lt;/p&gt;&#xA;&lt;p&gt;Let&amp;rsquo;s settle one important convention first though: In everything that follows, I&amp;rsquo;ll only count the cards that are actually auctioned off. The last card is never auctioned off, so it doesn&amp;rsquo;t count towards the game length. This means that the shortest possible game is 3 rounds long: this happens if all 4 dark cards are on top of the deck (very unlikely). The longest possible game on the other hand is 15 rounds long: this happens if the card at the bottom of the deck is dark and hence the 15 cards above it will be autioned off (actually pretty likely, as we shall see).&lt;/p&gt;&#xA;&lt;h2 id=&#34;simulation&#34;&gt;Simulation&lt;/h2&gt;&#xA;&lt;p&gt;It&amp;rsquo;s really simple to simulate this situation. Just create a bunch of (virtual) decks of 16 cards each, colour 4 of them dark, then shuffle them. Now we just need to count where in each of the decks the 4th dark card is. If our sample was big enough, this gives us a really good approximation of the distribution of game lengths.&lt;/p&gt;&#xA;&lt;p&gt;If you know a little bit of Python and the ubiquitous &lt;code&gt;numpy&lt;/code&gt; library, you can do this in just a few lines of code, so I thought I&amp;rsquo;d walk you through it. If you don&amp;rsquo;t care about coding, just skip ahead to the results. (Be warned that formulae are coming up next though, so the code might be the relaxing bit.)&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; np&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Set up the parameters&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;num_cards &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;num_dark &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;num_games &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1_000_000&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rng &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;default_rng(seed&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Create the decks: num_games rows, num_cards columns&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;games &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;zeros((num_games, num_cards), dtype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;bool)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Colour the last four columns in each row dark&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;games[:, :num_dark] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Shuffle each row individually&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;games &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; rng&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;permuted(games, axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, out&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;games)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Count the game lengths: in each row,&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# sum the number of dark cards revealed so far.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Every column where this cumulative sum is&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# less than the number of dark cards is a round of the game.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;game_lengths &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cumsum(games, axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; num_dark, axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Mean and standard deviation of the game lengths&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print(game_lengths&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;mean(), game_lengths&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;std())&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Histogram the game lengths&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;unique_lengths, length_counts &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique(game_lengths, return_counts&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print(dict(zip(unique_lengths, length_counts &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; num_games)))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Don&amp;rsquo;t worry if you can&amp;rsquo;t follow the code immediately, I&amp;rsquo;ll admit to playing a bit of code golf there. The important part are the results anyways, which should look something like this: the mean game length is &lt;strong&gt;12.6 rounds&lt;/strong&gt; with a &lt;strong&gt;standard deviation of 2.3&lt;/strong&gt;. This is the full distribution of game lengths:&lt;/p&gt;&#xA;&lt;table&gt;&#xA;&lt;thead&gt;&#xA;&lt;tr&gt;&#xA;&lt;th style=&#34;text-align:right&#34;&gt;Length&lt;/th&gt;&#xA;&lt;th style=&#34;text-align:right&#34;&gt;Probability&lt;/th&gt;&#xA;&lt;th&gt;&lt;/th&gt;&#xA;&lt;th style=&#34;text-align:right&#34;&gt;Length&lt;/th&gt;&#xA;&lt;th style=&#34;text-align:right&#34;&gt;Probability&lt;/th&gt;&#xA;&lt;/tr&gt;&#xA;&lt;/thead&gt;&#xA;&lt;tbody&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;3&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;0.1%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;10&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;6.6%&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;4&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;0.2%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;11&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;9.1%&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;5&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;0.5%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;12&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;12.1%&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;6&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;1.1%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;13&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;15.8%&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;7&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;1.9%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;14&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;20.0%&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;8&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;3.1%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;15&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;25.0%&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;tr&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;9&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;4.6%&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;td style=&#34;text-align:right&#34;&gt;&lt;/td&gt;&#xA;&lt;td&gt;&lt;/td&gt;&#xA;&lt;/tr&gt;&#xA;&lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;If you prefer the visual representation, here&amp;rsquo;s a histogram of the game lengths:&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/high-society/game_lengths.svg&#34;&#xA;&#x9;alt=&#34;Histogram of game lengths&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;As promised, very short games are extremely rare, whilst long games are in fact the most common. This isn&amp;rsquo;t necessarily what I would have expected when starting to think about this problem. I think there&amp;rsquo;s a pretty good intuition for why this is the case, but it&amp;rsquo;s instructive to examine the distribution from a more theoretic point of view first.&lt;/p&gt;&#xA;&lt;h2 id=&#34;hypergeometric-distribution&#34;&gt;Hypergeometric distribution&lt;/h2&gt;&#xA;&lt;p&gt;If you&amp;rsquo;ve done your statistics 101, you&amp;rsquo;ve indubitably come across questions about poker hands. E.g., how likely is it to get a flush when drawing 5 cards out of a standard deck of 52? The answer to this question can be calculated using the hypergeometric distribution. If you find the name intimidating, wait till you see the formula:&lt;/p&gt;&#xA;&lt;p&gt;\[ p_\text{HG}(N, K, n; k) = \frac{{K \choose k} {N - K \choose n - k}}{{N \choose n}}. \]&lt;/p&gt;&#xA;&lt;p&gt;So let&amp;rsquo;s take this step by step. Applied to our situation, we have a total of \(N = 16\) cards, \(K = 4\) of which are &amp;ldquo;successes&amp;rdquo;, i.e., the dark ones. In the standard application of the hypergeometric distribution, we&amp;rsquo;d draw a fixed number of \(n\) cards and want to know the probability that exactly \(k\) of them are dark. Our problem however is a little different: we need to fix \(k = 4\) dark cards to be drawn and want to know the probability that this happens within the first \(n\) draws. This is &lt;em&gt;almost&lt;/em&gt; what we want ‚Äì it describes the probability that the game lasts &lt;em&gt;less&lt;/em&gt; than \(n\) rounds. Let \(X\) be the random variable that describes the game length. Then what we just said can be expressed as&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X \lt n) = p_\text{HG}(16, 4, n; 4) = \frac{{4 \choose 4} {16 - 4 \choose n - 4}}{{16 \choose n}} = \frac{{12 \choose n - 4}}{{16 \choose n}}. \]&lt;/p&gt;&#xA;&lt;p&gt;Now, it&amp;rsquo;s easy to recover the probability is that the game lasts &lt;em&gt;exactly&lt;/em&gt; \(n\) rounds:&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = n) = P(X \lt n + 1) - P(X \lt n) = \frac{{12 \choose n - 3}}{{16 \choose n + 1}} - \frac{{12 \choose n - 4}}{{16 \choose n}}, \]&lt;/p&gt;&#xA;&lt;p&gt;where \(n \ge 4\) to make sure the binomial coefficients are defined (I&amp;rsquo;ll leave \(P(X = 3)\) as an exercise to the reader). If you&amp;rsquo;re bored, you can flex your algebraic muscles and simplify this expression:&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = n) = \frac{12! \cdot n! \cdot 4}{(n - 3)! \cdot 16!}. \]&lt;/p&gt;&#xA;&lt;p&gt;This is a nice closed form, but it&amp;rsquo;s &lt;em&gt;a)&lt;/em&gt; tedious to calculate as those factorials really do blow up and &lt;em&gt;b)&lt;/em&gt; not particularly insightful. Can we do better?&lt;/p&gt;&#xA;&lt;h2 id=&#34;pedestrian-but-insightful-formula&#34;&gt;Pedestrian, but insightful formula&lt;/h2&gt;&#xA;&lt;p&gt;Did you notice above how \(P(X = 15) = 25\%\) is such a nice round number? Maybe it&amp;rsquo;s worth calculating this value in yet another way. So, what does it mean for the game to go over the full length? It means that the very last card has to be a dark one. What&amp;rsquo;s the probability of this happening? Well, 4 out of 16 cards are dark, so there&amp;rsquo;s a 1 in 4 chance of the last card being dark.&lt;/p&gt;&#xA;&lt;p&gt;Similarly, we can check why \(P(X = 14) = 20\%\). This means the penultimate card will have to be the 4th dark card, i.e., the last card has to be light. In other words,&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = 14) = \frac{12}{16} \cdot \frac{4}{15} = \frac{1}{5} = 20\%. \]&lt;/p&gt;&#xA;&lt;p&gt;Once I started to examine this pattern, a lightbulb went on in my head. We need to flip the deck over! üí° Now, we&amp;rsquo;re no longer asking where the 4th dark card is in the pile, but rather how many light cards are in a row at the bottom of it. This is pretty straightforward to write down, e.g., for the next probability in line:&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = 13) = \frac{12}{16} \cdot \frac{11}{15} \cdot \frac{4}{14} = \frac{11}{70} \approx 15.7\%. \]&lt;/p&gt;&#xA;&lt;p&gt;And in general:&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = n) = \frac{4}{n+1} \cdot \prod_{k=n-2}^{12} \frac{k}{k+4}. \]&lt;/p&gt;&#xA;&lt;p&gt;Again, if you feel bored, you can express this product in terms of the same factorials as above. But the big advantage of this formulation is that it&amp;rsquo;s pretty transparent what&amp;rsquo;s going on.&lt;/p&gt;&#xA;&lt;!-- TODO: Let&#39;s carry out those algebraic steps. --&gt;&#xA;&lt;p&gt;So, are we finally done? Not quite, there&amp;rsquo;s still another way of arriving at the same result, which is a bit more elegant and general.&lt;/p&gt;&#xA;&lt;h2 id=&#34;negative-hypergeometric-distribution&#34;&gt;Negative hypergeometric distribution&lt;/h2&gt;&#xA;&lt;p&gt;When playing with the hypergeometric distribution above, you might&amp;rsquo;ve stumbled across an important question we&amp;rsquo;ve ignored: is this even a proper distribution, i.e., do all those values sum up to 1? Those \(p_\text{HG}(N, K, n; k)\) assume you fix some parameters \(N\) (the number of cards), \(K\) (the number of dark cards), and \(n\) (the number of draws) and then run through all permissible values of \(k\) (the number of dark cards drawn). Summing \(p_\text{HG}(N, K, n; k)\) over all \(k\) for fixed parameters is guaranteed to give 1, but we&amp;rsquo;ve instead kept \(k\) fixed at 4 (i.e., draw all dark cards) and ranged \(n\) over all possible number of draws. Hasn&amp;rsquo;t someone already figured out the details of this distribution?&lt;/p&gt;&#xA;&lt;p&gt;Of course they have ‚Äì this is called the &lt;a href=&#34;https://en.wikipedia.org/wiki/Negative_hypergeometric_distribution&#34;&gt;negative hypergeometric distribution&lt;/a&gt;. Whilst the hypergeometric distribution counts the number of successes in a fixed number of draws, the negative hypergeometric distribution counts the number of successes until a fixed number of failures occur. Translated to our problem, it&amp;rsquo;ll count how many light cards are drawn before the 4th dark card is drawn. Again, this is &lt;em&gt;almost&lt;/em&gt; what we want ‚Äì the game length will be the number of light cards drawn plus 3 for the first dark cards, which will be auctioned off as well.&lt;/p&gt;&#xA;&lt;p&gt;The probability mass function of the negative hypergeometric distribution is given by&lt;/p&gt;&#xA;&lt;p&gt;\[ p_\text{NHG}(N, K, r; k) = \frac{{k + r - 1 \choose k} {N - r - k \choose K - k}}{N \choose K}, \]&lt;/p&gt;&#xA;&lt;p&gt;where \(N = 16\) is the total number of cards, \(K = 12\) is the number of &lt;em&gt;light&lt;/em&gt; cards amongst them, \(r = 4\) is the number of dark cards (which will end the experiment / game), and \(k\) is the number of light cards drawn. Again, let \(X\) be the random variable that describes the game length. Then the probability that the game lasts \(n\) rounds is&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = n) = p_\text{NHG}(16, 12, 4; n - 3) = \frac{{n - 3 + 4 - 1 \choose n - 3} {16 - 4 - n + 3 \choose 12 - n + 3}}{16 \choose 12} = \frac{{n \choose n - 3}}{16 \choose 12}, \]&lt;/p&gt;&#xA;&lt;p&gt;which we can further simplify to&lt;/p&gt;&#xA;&lt;p&gt;\[ P(X = n) = \frac{n!}{(n-3)! \cdot 3!} \cdot \frac{12! \cdot 4!}{16!} = \frac{12! \cdot n! \cdot 4}{(n - 3)! \cdot 16!}, \]&lt;/p&gt;&#xA;&lt;p&gt;so thankfully, this checks out. üòå&lt;/p&gt;&#xA;&lt;p&gt;Now, you might think it&amp;rsquo;s quite redundant to derive the same result over and over, but I find it immensely satisfying to obtain the same formula in 3 different ways ‚Äì and have them verified by simulation. Probability theory can be very tricky and plausible calculations can go wrong in unexpected ways. This article could&amp;rsquo;ve just been a single paragraph if we had immediately given away the answer with the negative hypergeometric distribution, but I honestly wouldn&amp;rsquo;t have trusted the results just like that.&lt;/p&gt;&#xA;&lt;!-- TODO: What&#39;s the intuition behind long games? --&gt;&#xA;&lt;p&gt;One final question remains: Did Reiner Knizia crunch the numbers when he designed the game? I can&amp;rsquo;t tell for sure, but he does hold a PhD in mathematics, so he would certainly have carefully considered the impact of the game length on the balance and gaming experience. When it comes to the &amp;ldquo;fun&amp;rdquo; in games, theory doesn&amp;rsquo;t matter and play testing is king, but calculations like these will provide a shortcut in the design process. Simulations are usually the fastest and most robust way to model a game, but calculations can lead you down really fun rabbit holes ‚Äì I speak from experience‚Ä¶ üêá&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;PS&lt;/em&gt;: You can find the code for the simulation etc &lt;a href=&#34;https://gitlab.com/recommend.games/blog/-/tree/master/experiments/high_society&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&#xA;</description>
    </item>
    <item>
      <title>Child&#39;s play: How hard is Orchard?</title>
      <link>https://recommend-games.github.io/posts/orchard/</link>
      <pubDate>Wed, 24 Jan 2024 21:42:58 +0200</pubDate><author>contact@recommend.games (Recommend.Games)</author>
      <guid>https://recommend-games.github.io/posts/orchard/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://recommend.games/#/game/5770&#34; style=&#34;font-variant: small-caps;&#34;&gt;Orchard&lt;/a&gt; is a beloved children&amp;rsquo;s game classic which is so old ‚Äì it&amp;rsquo;s as old as myself. üë¥ As one might expect from a children&amp;rsquo;s game, it&amp;rsquo;s really simple: roll a die, pick a fruit of the corresponding color, and put it in the basket. If you roll the raven, the raven moves one step closer to the orchard. If you manage to pick all the fruit before the raven reaches the orchard, you win together. If the raven reaches the orchard first, you lose.&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/orchard_cover_huecd9ec0d293c1cf1fe0ce58b00ca2553_181332_600x0_resize_q75_box.jpg&#34;&#xA;&#x9;alt=&#34;Cover of Orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;It&amp;rsquo;s really quite charming and the fruits make great toys. Kids learn to wait for their turns, to recognise colours and maybe even to accept when they lose. But one thing the game does not teach is making smart decisions: on most turns, the die roll completely determines your action. One die face shows a basket which allows you to pick any fruit you want, but you probably already figured out what&amp;rsquo;s the dominant strategy: select the fruit we have the most left of. So really, the game offers no meaningful decisions at all.&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/orchard_detail_hufeed133767ebd7912eff5df4bd2af11a_266861_600x0_resize_q75_box.jpg&#34;&#xA;&#x9;alt=&#34;Detail shot of Orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;What makes for a pretty dull game (by adult standards, of course) actually makes for an excellent playground for simulations! The lack of choices means that the probability of winning is completely determined by die rolls, not skills, and hence can be objectively measured. So if you ever wondered how hard it is to beat the raven in that game from your childhood, you&amp;rsquo;re in for a treat! ü§ì&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/orchard_in_orchard_hudb548f1e7d2e3afd6ae16d4765dfa0a1_785660_600x0_resize_q75_box.jpg&#34;&#xA;&#x9;alt=&#34;Orchard in an orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;In order to determine the win rate, we can just simulate a series of die rolls and check if their outcome means we win or lose the game. Repeat this process thousands of times and we get a pretty good estimate of the win rate. So without further ado, here&amp;rsquo;s the win rate for &lt;a href=&#34;https://recommend.games/#/game/5770&#34; style=&#34;font-variant: small-caps;&#34;&gt;Orchard&lt;/a&gt;:&lt;/p&gt;&#xA;&lt;p&gt;It&amp;rsquo;s &lt;strong&gt;68.3%&lt;/strong&gt;. You&amp;rsquo;re going to win just over two thirds of your games of &lt;a href=&#34;https://recommend.games/#/game/5770&#34; style=&#34;font-variant: small-caps;&#34;&gt;Orchard&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;Is this particularly high or low? It&amp;rsquo;s actually a really tough challenge in game design to calibrate the win rate of a co-operative game. If you ask people how often they should win a co-operative game for it to be interesting and challenging, they might say something like 50‚Äì50, but in reality people simply don&amp;rsquo;t like losing and would probably be frustrated to play a game where they lose half the time. With that in mind, a game the children will lose 32% of the time seems like a desaster in the making. üòÖ&lt;/p&gt;&#xA;&lt;p&gt;A by-product of the simulation is that we can also look at the distribution of game lengths. Here&amp;rsquo;s a histogram of the lengths of games of &lt;a href=&#34;https://recommend.games/#/game/5770&#34; style=&#34;font-variant: small-caps;&#34;&gt;Orchard&lt;/a&gt;:&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/game_length_original.svg&#34;&#xA;&#x9;alt=&#34;Histogram over the lengths of games of Orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;So the average game last for about 40 rounds, with a standard deviation of about 5.4, i.e., quite a lot of spread. The shortest possible game would be losing after rolling 9 ravens in a row ‚Äì the probability of that is \( 6^{-9} \approx 0.00001\% \) or 1 in 10 million games. The shortest possible win would mean rolling the basket 20 times in a row (basket rolls allow you to pick two fruits at once) ‚Äì which happens in 1 in 3,656,158,440,062,976 games. In theory, the game could go on forever if you keep rolling fruits you&amp;rsquo;ve already emptied, but honestly, already 40 die rolls without any decisions feels long enough for my taste ‚Äì in particular when you have to watch a toddler at the same time. üë∂&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/first_orchard_cover_hu8c86d820db0f3c708709ba252911b277_470501_600x0_resize_q75_box.jpg&#34;&#xA;&#x9;alt=&#34;Cover of First Orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;Luckily, there&amp;rsquo;s a version for even smaller children called &lt;a href=&#34;https://recommend.games/#/game/41302&#34; style=&#34;font-variant: small-caps;&#34;&gt;First Orchard&lt;/a&gt;. Mechanically, it&amp;rsquo;s almost equivalent except for a few hyperparameter: there&amp;rsquo;s only 4 of each fruit instead of 10, you only get to pick one fruit on a basket roll and you lose the game after 6 raven rolls,&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; but that&amp;rsquo;s it. How do these changes affect the win rate?&lt;/p&gt;&#xA;&lt;p&gt;The answer is &lt;strong&gt;76.8%&lt;/strong&gt;. Expect to win 3 out of 4 games of &lt;a href=&#34;https://recommend.games/#/game/41302&#34; style=&#34;font-variant: small-caps;&#34;&gt;First Orchard&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;When playing with toddlers who rarely have the emotional maturity to handle losing, this seems like a much better win rate. Reducing the number of fruits also cuts the game length in half, much more accomodating for the attention span of a toddler:&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/game_length_first.svg&#34;&#xA;&#x9;alt=&#34;Histogram over the lengths of games of First Orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;Obviously, the win rate will be affected by chosing any of those parameters, but the length of the raven path would probably be the easiest lever to pull if we wanted to make &lt;a href=&#34;https://recommend.games/#/game/41302&#34; style=&#34;font-variant: small-caps;&#34;&gt;First Orchard&lt;/a&gt; as hard as its big sibling. Here&amp;rsquo;s the win rate for different lengths of the raven path:&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/win_rates_first.svg&#34;&#xA;&#x9;alt=&#34;Win rates for First Orchard with different lengths of the raven path&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;Reducing the path by just one step drops the win rate to 63%, i.e., even below that of &lt;a href=&#34;https://recommend.games/#/game/5770&#34; style=&#34;font-variant: small-caps;&#34;&gt;Orchard&lt;/a&gt;, another step reducting would lower it below 50%. For the sake of the peace in our household, I&amp;rsquo;m glad they&amp;rsquo;ve found the space in the box for the extra steps. üòÖ&lt;/p&gt;&#xA;&#xA;&lt;img&#xA;&#x9;src=&#34;https://recommend-games.github.io/posts/orchard/first_orchard_detail_hu378dbc7f42c10156c9592c0e7737f9fd_819988_600x0_resize_q75_box.jpg&#34;&#xA;&#x9;alt=&#34;Detail shot of First Orchard&#34;&#xA;&#x9; /&gt;&#xA;&#xA;&lt;p&gt;I&amp;rsquo;ll leave you with one final thought: as an obsessive data collector, I have logged 68 games of &lt;a href=&#34;https://recommend.games/#/game/41302&#34; style=&#34;font-variant: small-caps;&#34;&gt;First Orchard&lt;/a&gt;, 47 of which we&amp;rsquo;ve won, i.e., we have a win rate of 69.1%. Our sample isn&amp;rsquo;t big enough for this difference to be significant (or is it? I&amp;rsquo;m not going to crunch the numbers now ü§∑), but anyways there&amp;rsquo;s plenty of factors that influence our win rate IRL: my children will rather pick their favourite colour when given a choice than follow the optimal strategy, there was an extra apple in our box (and children emphatically cannot stand leftover components ‚Äì publishers, take note and stop putting variants in children&amp;rsquo;s games üòâ), their die rolling is far from random, etc. Also, I don&amp;rsquo;t think we ever really lost a game of &lt;a href=&#34;https://recommend.games/#/game/41302&#34; style=&#34;font-variant: small-caps;&#34;&gt;First Orchard&lt;/a&gt;: when the raven reaches the orchard, my older daughter will just say that the raven flies off to its nest. üê¶‚Äç‚¨õ Toddlers‚Ä¶ ü§∑&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;PS&lt;/em&gt;: You can find the code for the simulations &lt;a href=&#34;https://gitlab.com/recommend.games/blog/-/tree/master/experiments/orchard&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;&#xA;&lt;hr&gt;&#xA;&lt;ol&gt;&#xA;&lt;li id=&#34;fn:1&#34;&gt;&#xA;&lt;p&gt;The raven path in &lt;a href=&#34;https://recommend.games/#/game/41302&#34; style=&#34;font-variant: small-caps;&#34;&gt;First Orchard&lt;/a&gt; actually has 5 steps, but you start off path and lose when the raven steps off the path into the orchard, i.e., after 6 raven rolls.&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/div&gt;&#xA;</description>
    </item>
  </channel>
</rss>
